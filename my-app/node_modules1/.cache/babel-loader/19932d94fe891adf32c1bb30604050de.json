{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Katusha\\\\my-app\\\\src\\\\components\\\\Leagues\\\\LeagueSchedule\\\\LeagueScheduleContainer.js\";\nimport React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport moment from 'moment';\nimport LeagueSchedule from './LeagueSchedule';\nimport Period from '../../common/Period/Period';\nimport { withRouter } from 'react-router-dom';\nimport { setLeagueSchedule } from \"../../../redux/leagues-reducer\";\nimport { setlistLeaguesCreator } from \"../../../redux/leagues-reducer\";\nimport { setLeagueCreator } from \"../../../redux/leagues-reducer\";\nimport { compose } from \"redux\"; //import leagueScheduleData from '../../../data/EventsOfLeague177';\n\nclass LeagueScheduleContainer extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    this.apiToState = () => {\n      let league_id = this.props.match.params.league_id;\n      let API_KEY = process.env.REACT_APP_USER_TOKEN;\n      let year = this.props.year;\n      let dateFrom = moment(this.props.startDate).format('YYYY-MM-DD');\n      let dateTo = moment(this.props.endDate).format('YYYY-MM-DD'); //setLoaded(false);\n      //const apiUrl = \"https://api.football-data.org/v2/competitions/\"+league_id+\"/matches?season=\"+year;\n\n      const apiUrl = \"https://api.football-data.org/v2/competitions/\" + league_id + \"/matches?dateFrom=\" + dateFrom + \"&dateTo=\" + dateTo;\n      fetch(apiUrl, {\n        method: 'GET',\n        headers: {\n          'X-Auth-Token': API_KEY\n        }\n      }).then(response => response.json()).then(response => {\n        console.log({\n          matches: response.matches\n        });\n        this.props.setLeagueSchedule(response.matches);\n\n        if (this.props.league_id !== this.props.match.params.league_id) {\n          let league = {\n            id: response.competition.code,\n            name: response.competition.name\n          };\n          this.props.setLeagueCreator(league);\n        } //this.setState({isLoaded: true});\n        // }\n\n      }).then(error => {\n        this.setState({\n          false: true\n        });\n        this.setState({\n          error\n        });\n      }).catch(error => console.log('parsing failed', error));\n    };\n  }\n\n  componentDidMount() {\n    this.apiToState();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.league_id !== this.props.match.params.league_id || this.props.startDate !== prevProps.startDate || this.props.endDate !== prevProps.endDate) {\n      this.apiToState(); //    this.props.setLeagueSchedule(this.props.Data.matches);\n      //action = setLeagueSchedule(Data.matches);\n      //this.props.store.dispatch(setLeagueSchedule(leagueScheduleData.matches));  \n    }\n  }\n  /*if (error) {\r\n      \t\treturn <div>Error: {error.message}</div>;\r\n  \t\t} \r\n  \t\telse if (!loaded) {\r\n      \t\treturn <div>Loading...</div>;\r\n  \t\t} \r\n  \t\telse {*/\n\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Period, {\n      store: this.props.store,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(LeagueSchedule, {\n      leagueSchedule: this.props.leagueSchedule,\n      league_name: this.props.league_name,\n      year: this.props.year,\n      search: this.props.search,\n      startDate: this.props.startDate,\n      endDate: this.props.endDate,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 5\n      }\n    }));\n  }\n\n}\n\nlet mapStateToProps = state => ({\n  leagueSchedule: state.leagues.leagueSchedule,\n  league_id: state.leagues.league.id,\n  league_name: state.leagues.league.name,\n  year: state.year,\n  startDate: state.period.startDate,\n  endDate: state.period.endDate,\n  search: state.search\n});\n\nexport default compose(connect(mapStateToProps, {\n  setLeagueCreator\n}), connect(mapStateToProps, {\n  setLeagueSchedule\n}), withRouter)(LeagueScheduleContainer);","map":{"version":3,"sources":["C:/Users/Katusha/my-app/src/components/Leagues/LeagueSchedule/LeagueScheduleContainer.js"],"names":["React","Component","connect","moment","LeagueSchedule","Period","withRouter","setLeagueSchedule","setlistLeaguesCreator","setLeagueCreator","compose","LeagueScheduleContainer","apiToState","league_id","props","match","params","API_KEY","process","env","REACT_APP_USER_TOKEN","year","dateFrom","startDate","format","dateTo","endDate","apiUrl","fetch","method","headers","then","response","json","console","log","matches","league","id","competition","code","name","error","setState","false","catch","componentDidMount","componentDidUpdate","prevProps","render","store","leagueSchedule","league_name","search","mapStateToProps","state","leagues","period"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { connect } from \"react-redux\";\r\nimport moment from 'moment';\r\nimport LeagueSchedule from './LeagueSchedule';\r\nimport Period from '../../common/Period/Period';\r\nimport { withRouter } from 'react-router-dom';\r\nimport {setLeagueSchedule} from \"../../../redux/leagues-reducer\";\r\nimport {setlistLeaguesCreator} from \"../../../redux/leagues-reducer\";\r\nimport {setLeagueCreator} from \"../../../redux/leagues-reducer\";\r\nimport {compose} from \"redux\";\r\n\r\n//import leagueScheduleData from '../../../data/EventsOfLeague177';\r\n\r\nclass LeagueScheduleContainer extends React.Component {\r\n\r\napiToState =()=>{\r\n    let league_id = this.props.match.params.league_id;\r\n\r\n    let API_KEY = process.env.REACT_APP_USER_TOKEN;\r\n      \r\n      let year = this.props.year;\r\n      let dateFrom = moment(this.props.startDate).format('YYYY-MM-DD')\r\n      let dateTo = moment(this.props.endDate).format('YYYY-MM-DD')\r\n      //setLoaded(false);\r\n      //const apiUrl = \"https://api.football-data.org/v2/competitions/\"+league_id+\"/matches?season=\"+year;\r\n      const apiUrl = \"https://api.football-data.org/v2/competitions/\"+league_id+\"/matches?dateFrom=\"+dateFrom+\"&dateTo=\"+dateTo;\r\n      fetch(apiUrl, {\r\n          method: 'GET',\r\n          headers: {\r\n            'X-Auth-Token': API_KEY\r\n          }\r\n      })\r\n      .then((response) => response.json())\r\n      .then((response) => {\r\n        console.log({matches:response.matches});\r\n        this.props.setLeagueSchedule(response.matches);\r\n        \r\n        if (this.props.league_id !== this.props.match.params.league_id)\r\n           {let league={id:response.competition.code, name: response.competition.name};\r\n            this.props.setLeagueCreator(league);}\r\n          //this.setState({isLoaded: true});\r\n       // }\r\n      })\r\n      .then((error) => {\r\n          this.setState({false: true});\r\n          this.setState({error});\r\n      })      \r\n      .catch(error => console.log('parsing failed', error))\r\n}\r\n\t\r\ncomponentDidMount() {\r\n  this.apiToState();}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\r\n  if ((this.props.league_id !== this.props.match.params.league_id)||(this.props.startDate !== prevProps.startDate)||(this.props.endDate !== prevProps.endDate)) {\r\n\r\n\tthis.apiToState();\r\n\r\n   \r\n//    this.props.setLeagueSchedule(this.props.Data.matches);\r\n   \r\n \r\n    //action = setLeagueSchedule(Data.matches);\r\n    //this.props.store.dispatch(setLeagueSchedule(leagueScheduleData.matches));  \r\n}\r\n  \t}\t\r\n\r\n\r\n\t\r\n\t\t/*if (error) {\r\n      \t\treturn <div>Error: {error.message}</div>;\r\n  \t\t} \r\n  \t\telse if (!loaded) {\r\n      \t\treturn <div>Loading...</div>;\r\n  \t\t} \r\n  \t\telse {*/\r\n\r\n\r\n\r\n    render() {\r\n\t\t  return <>\r\n        <Period store={this.props.store} />\r\n\t\t\t\t<LeagueSchedule  leagueSchedule = {this.props.leagueSchedule} league_name={this.props.league_name} year={this.props.year} search={this.props.search} startDate={this.props.startDate} endDate={this.props.endDate}/>\r\n\t\t\t</>\r\n\t}\r\n}\r\n\r\nlet mapStateToProps = (state) => ({\r\n    leagueSchedule : state.leagues.leagueSchedule,\r\n    league_id : state.leagues.league.id,\r\n    league_name : state.leagues.league.name,\r\n    year:state.year,\r\n    startDate: state.period.startDate,\r\n    endDate: state.period.endDate,\r\n    search:state.search\r\n})\r\n\r\nexport default compose( connect(mapStateToProps,{setLeagueCreator}),\r\n                        connect(mapStateToProps,{setLeagueSchedule}),\r\n                withRouter\r\n)(LeagueScheduleContainer);\r\n"]},"metadata":{},"sourceType":"module"}