{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\Katusha\\\\my-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{withRouter}from'react-router-dom';var TITLE='Расписание лиги Championship';var LeagueSchedule=function LeagueSchedule(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),leaguesSchedule=_useState2[0],setLeaguesSchedule=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loaded=_useState4[0],setLoaded=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),search=_useState8[0],setSearch=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),filteredDataLeagues=_useState10[0],setFilteredDataLeagues=_useState10[1];useEffect(function(){var API_KEY=process.env.REACT_APP_USER_TOKEN;var league_id=props.match.params.league_id;var period=props.period;//console.log(\"https://api.football-data.org/v2/competitions/\"+league_id+\"/matches?season=\"+period);\nsetLoaded(false);var apiUrl=\"https://api.football-data.org/v2/competitions/\"+league_id+\"/matches?season=\"+period;fetch(apiUrl,{method:'GET',headers:{'X-Auth-Token':API_KEY}}).then(function(res){return res.json();}).then(function(json){setLoaded(true);setLeaguesSchedule(json);},function(error){setLoaded(true);setError(error);}).catch(function(error){return console.log('parsing failed',error);});},[]);var Data=props.Data.matches;//let Data=leaguesSchedule.matches;\n//console.log(\"Data=\"+Data)\nuseEffect(function(){if(Data!==undefined){setFilteredDataLeagues(Data.filter(function(leaguesSchedule){return(leaguesSchedule.homeTeam.name+leaguesSchedule.awayTeam.name).toLowerCase().includes(search.toLowerCase());}));}else setFilteredDataLeagues(null);},[search]);var listItems=/*#__PURE__*/React.createElement(\"div\",null,\"\\u041D\\u0435\\u0442 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445\");if(filteredDataLeagues!==null){listItems=filteredDataLeagues.map(function(item){return/*#__PURE__*/React.createElement(\"li\",{key:item.id},\"\\\"\\u0414\\u0430\\u0442\\u0430 \\u043D\\u0430\\u0447\\u0430\\u043B\\u0430:\\\"+\",item.season.startDate,\"+\\\"\\u0414\\u0430\\u0442\\u0430 \\u043E\\u043A\\u043E\\u043D\\u0447\\u0430\\u043D\\u0438\\u044F:\\\"+\",item.season.startDate,\"+\\\"   \\\"+\\\"\\u0414\\u043E\\u043C\\u0430\\u0448\\u043D\\u044F\\u044F \\u0433\\u0440\\u0443\\u043F\\u043F\\u0430:\\\"+\",item.homeTeam.name,\"+\\\"\\u0413\\u043E\\u0441\\u0442\\u044C:\\\"+\",item.awayTeam.name,\")))\");});}if(error){return/*#__PURE__*/React.createElement(\"div\",null,\"Error: \",error.message);}else if(!loaded){return/*#__PURE__*/React.createElement(\"div\",null,\"Loading...\");}else{return/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},/*#__PURE__*/React.createElement(\"h1\",null,TITLE),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043A\\u043E\\u043C\\u0430\\u043D\\u0434\\u044B\",onChange:function onChange(e){return setSearch(e.target.value);}}),/*#__PURE__*/React.createElement(\"ul\",null,listItems));}};export default withRouter(LeagueSchedule);","map":{"version":3,"sources":["C:/Users/Katusha/my-app/src/components/Leagues/LeagueSchedule/LeagueSchedule.js"],"names":["React","useState","useEffect","withRouter","TITLE","LeagueSchedule","props","leaguesSchedule","setLeaguesSchedule","loaded","setLoaded","error","setError","search","setSearch","filteredDataLeagues","setFilteredDataLeagues","API_KEY","process","env","REACT_APP_USER_TOKEN","league_id","match","params","period","apiUrl","fetch","method","headers","then","res","json","catch","console","log","Data","matches","undefined","filter","homeTeam","name","awayTeam","toLowerCase","includes","listItems","map","item","id","season","startDate","message","e","target","value"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nconst TITLE = 'Расписание лиги Championship'\r\n\r\nconst LeagueSchedule = (props) => {\r\n  const [leaguesSchedule, setLeaguesSchedule] = useState([]);\r\n\r\n  const [loaded, setLoaded] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const [search, setSearch] = useState('');\r\n  const [filteredDataLeagues, setFilteredDataLeagues] = useState([]);\r\n\r\n  useEffect(() =>{\r\n    let API_KEY = process.env.REACT_APP_USER_TOKEN;\r\n    let league_id = props.match.params.league_id;\r\n    let period = props.period;\r\n    //console.log(\"https://api.football-data.org/v2/competitions/\"+league_id+\"/matches?season=\"+period);\r\n    setLoaded(false);\r\n    const apiUrl = \"https://api.football-data.org/v2/competitions/\"+league_id+\"/matches?season=\"+period;\r\n    fetch(apiUrl, {\r\n      method: 'GET',\r\n      headers: {\r\n         'X-Auth-Token': API_KEY\r\n      }\r\n    })\r\n    .then(res => res.json())\r\n    .then(\r\n      json => {\r\n        setLoaded(true);\r\n        setLeaguesSchedule(json);\r\n      },\r\n      (error) =>{\r\n        setLoaded(true);  \r\n        setError(error);\r\n      }\r\n    )\r\n    .catch(error => console.log('parsing failed', error))\r\n  },[])\r\n\r\n   let Data=props.Data.matches;\r\n  //let Data=leaguesSchedule.matches;\r\n  //console.log(\"Data=\"+Data)\r\n\r\n  useEffect( () =>{\r\n    if (Data !== undefined){\r\n    setFilteredDataLeagues(\r\n      Data.filter( leaguesSchedule => {\r\n        return (leaguesSchedule.homeTeam.name+leaguesSchedule.awayTeam.name).toLowerCase().includes(search.toLowerCase())\r\n      })\r\n      )}\r\n    else setFilteredDataLeagues(null)\r\n  },[search])\r\n\r\n \r\n\r\n  let listItems=<div>Нет данных</div> \r\n  if (filteredDataLeagues !== null ){\r\n     listItems=filteredDataLeagues.map(item => (  \r\n     <li key={item.id}>\"Дата начала:\"+{item.season.startDate}+\"Дата окончания:\"+{item.season.startDate}+\"   \"+\"Домашняя группа:\"+{item.homeTeam.name}+\"Гость:\"+{item.awayTeam.name})))\r\n     </li> \r\n  ))\r\n  }\r\n\r\n if (error) {\r\n      return <div>Error: {error.message}</div>;\r\n  } \r\n  else if (!loaded) {\r\n      return <div>Loading...</div>;\r\n  } \r\n  else {\r\n\r\n\treturn ( \r\n    <div className=\"content\">\r\n      <h1>{TITLE}</h1>\r\n      <input type=\"text\" placeholder=\"Название команды\" onChange={ e => setSearch(e.target.value)} />\r\n        <ul>    \r\n          {listItems}\r\n        </ul>\r\n    </div>\r\n\t) \r\n}\r\n}\r\n\r\nexport default withRouter(LeagueSchedule);"]},"metadata":{},"sourceType":"module"}